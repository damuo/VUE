<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    //1.原始写法
    /*new Promise((resolve,reject)=>{
        //第一次请求发起
        setTimeout(()=>{
            let random = Math.random()
            const succes="第一次请求成功"
            const faild="第一次请求失败"
            if(random>0.5){
                resolve(succes)
            }else {
                return reject(faild)
            }
        },1000)
    }).then(data=>{//第一次请求结果成功
        console.log(data);
        return new Promise((resolve,reject)=>{
            //第二次请求发起
            let random = Math.random()
            const succes="第二次请求成功"
            const faild="第二次请求失败"
            if(random>0.5){
                resolve(data+succes)
            }else {
                reject(data+faild)
            }
        }).then((data)=>{//第二次请求结果成功
            console.log(data);
            return new Promise((resolve,reject)=>{
                //第三次请求发起
                //第二次请求发起
                let random = Math.random()
                const succes="第三次请求成功"
                const faild="第三次请求失败"
                if(random>0.5){
                    resolve(data+succes)
                }else {
                    reject(data+faild)
                }
            }).then((data)=>{//第三次请求结果成功
                console.log(data);
            }).catch((data)=>{//第三次请求结果失败
                console.log(data);
            })
        }).catch((data)=>{//第二次请求结果失败
            console.log(data);
        })
    }).catch((data)=>{//第一次请求结果失败
        console.log(data);
    })*/
    //2.简化写法:简化catch
    /*let test = new Promise((resolve, reject) => {
        let random = Math.random()
        if (random > 0.5) {
            resolve('成功1')
        } else {
            reject('失败1')
        }
    })

    let re=test.then((result) => {
        console.log("第一次请求:",result)
        let random = Math.random()
        if (random > 0.5) {
            return Promise.resolve('成功2')
        } else {
            return Promise.reject('失败2')
        }
    }).then((result) => {
        console.log("第二次请求",result)
        let random = Math.random()
        if (random > 0.5) {
            return Promise.resolve('成功3')
        } else {
            return Promise.reject('失败3')
        }
    }).then((result) => {
        console.log('第三次请求', result)
        let random = Math.random()
        if (random > 0.5) {
            return Promise.resolve('成功4')
        } else {
            return Promise.reject('失败4')
        }
    }).catch((result) => {
        console.log("请求",result)
        return result
    })*/
    //3.简化写法:简化resolve|简化catch
    /*let test = new Promise((resolve, reject) => {
        let random = Math.random()
        if (random > 0.5) {
            resolve('成功1')
        } else {
            reject('失败1')
        }
    })

    let re=test.then((result) => {
        console.log("第一次请求:",result)
        let random = Math.random()
        if (random > 0.5) {
            return '成功2'
        } else {
            return Promise.reject('失败2')
        }
    }).then((result) => {
        console.log("第二次请求",result)
        let random = Math.random()
        if (random > 0.5) {
            return '成功3'
        } else {
            return Promise.reject('失败3')
        }
    }).then((result) => {
        console.log('第三次请求', result)
        let random = Math.random()
        if (random > 0.5) {
            return '成功4'
        } else {
            return Promise.reject('失败4')
        }
    }).catch((result) => {
        console.log("请求",result)
        return result
    })*/
    console.log(re)
</script>
</body>
</html>